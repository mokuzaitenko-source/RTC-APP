<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RTC Assistant</title>
  <link rel="icon" type="image/svg+xml" href="/app/favicon.svg">
  <link rel="shortcut icon" href="/app/favicon.svg">
  <link rel="stylesheet" href="/app/theme.tokens.css">
  <link rel="stylesheet" href="/app/theme.base.css">
  <link rel="stylesheet" href="/app/theme.components.css">
  <link rel="stylesheet" href="/app/theme.page-assistant.css">
</head>
<body data-page="assistant">
  <main class="shell" aria-label="Assistant Workspace">
    <section class="panel top-nav" aria-label="Global Navigation">
      <p class="brand">RTC App</p>
      <nav class="nav-links">
        <a class="nav-link" href="/">Hub</a>
        <a class="nav-link active" href="/app" aria-current="page">Assistant</a>
        <a class="nav-link" href="/learn">Coach</a>
      </nav>
    </section>
    <section class="panel header">
      <div class="head-row">
        <div>
          <h1 class="title">RTC Assistant</h1>
          <p class="subtitle">Chat-first workspace for planning, debugging, and execution with session memory.</p>
        </div>
        <div class="toolbar">
          <span id="assistantApiBadge" class="chip">API V1</span>
          <span id="assistantProviderBadge" class="chip">Provider: --</span>
          <button id="assistantOpenHelp" data-allow-busy="true">Help</button>
        </div>
      </div>
      <p id="assistantStatusText" class="status">Ready.</p>
    </section>

    <section class="panel chat-wrap">
      <div id="chatThread" class="thread" aria-live="polite"></div>
      <form id="chatForm" class="composer">
        <label for="chatInput">
          Ask Assistant
          <textarea id="chatInput" placeholder="Example: Build me a practical 2-week MVP plan with milestones, acceptance checks, and fallback steps."></textarea>
        </label>
        <div class="compose-row">
          <label for="chatRisk">
            Risk Tolerance
            <select id="chatRisk">
              <option value="low">low</option>
              <option value="medium" selected>medium</option>
              <option value="high">high</option>
            </select>
          </label>
          <label for="chatModel">
            Model
            <select id="chatModel"></select>
          </label>
          <label for="chatApiVersion">
            API Version
            <select id="chatApiVersion">
              <option value="v1">v1</option>
              <option value="v2">v2</option>
            </select>
          </label>
          <label for="chatFormatPreset">
            Response Format
            <select id="chatFormatPreset">
              <option value="default">default</option>
              <option value="concise_plan">concise plan</option>
              <option value="implementation_brief">implementation brief</option>
              <option value="debugging_checklist">debugging checklist</option>
            </select>
          </label>
          <div class="toolbar">
            <button id="chatSend" class="primary" type="submit">Ask</button>
            <button id="chatClear" type="button">Clear</button>
          </div>
        </div>
        <div class="chip-row">
          <p class="chip-label">Quick prompts:</p>
          <button type="button" class="chip" data-role="chat-prompt" data-prompt="Turn my goal into a 5-step execution plan with acceptance checks.">5-step plan</button>
          <button type="button" class="chip" data-role="chat-prompt" data-prompt="Can we chat for 2 minutes? Help me clarify what I should build first.">Start a chat</button>
          <button type="button" class="chip" data-role="chat-prompt" data-prompt="Refine your previous answer to reduce risk and add fallback steps.">Refine with fallback</button>
          <button type="button" class="chip" data-role="chat-prompt" data-prompt="Create an implementation brief with scope, milestones, risks, and tests.">Implementation brief</button>
          <button type="button" class="chip" data-role="chat-prompt" data-prompt="Review this like a hiring manager and list top 5 gaps with fixes and measurable impact.">Hiring-manager review</button>
        </div>
      </form>
      <section id="acaTracePanel" class="trace-panel" hidden>
        <p class="trace-title">ACA Module Timeline</p>
        <ul id="acaTraceList" class="trace-list"></ul>
      </section>
    </section>
  </main>

  <div id="helpOverlay" class="overlay" hidden>
    <section class="panel dialog" role="dialog" aria-modal="true" aria-labelledby="helpTitle">
      <div class="dialog-head">
        <h2 id="helpTitle">Assistant Help</h2>
        <button id="closeHelp" data-allow-busy="true">Close</button>
      </div>
      <p class="help-copy">Do this next: write your goal in plain language, click Ask, then iterate until the output is execution-ready.</p>

      <div class="help-jump">
        <button data-role="help-jump" data-help-section="quick-start">Quick Start</button>
        <button data-role="help-jump" data-help-section="core-workflow">Core Workflow</button>
        <button data-role="help-jump" data-help-section="button-usage">Button Usage</button>
        <button data-role="help-jump" data-help-section="troubleshooting">Troubleshooting</button>
      </div>

      <section id="helpSectionQuickStart" class="help-section">
        <h3>Quick Start (90 seconds)</h3>
        <ul class="help-list">
          <li>Describe your target outcome in one plain sentence.</li>
          <li>Add one constraint (time, stack, or scope) and one success check.</li>
          <li>Ask one follow-up to tighten scope, format, or quality.</li>
        </ul>
      </section>

      <section id="helpSectionCoreWorkflow" class="help-section">
        <h3>Core Workflow</h3>
        <ul class="help-list">
          <li>Start with objective plus constraints.</li>
          <li>Request a concrete plan with acceptance checks and fallback behavior.</li>
          <li>Ask for revision until output is execution-ready.</li>
        </ul>
      </section>

      <section id="helpSectionButtonUsage" class="help-section">
        <h3>Button Usage</h3>
        <ul class="help-list">
          <li><strong>Ask:</strong> generate a response for current prompt.</li>
          <li><strong>Clear:</strong> reset visible chat thread.</li>
          <li><strong>Help:</strong> reopen guidance and quick actions.</li>
          <li><strong>Response Format:</strong> force output style (concise plan, implementation brief, debugging checklist).</li>
        </ul>
      </section>

      <section class="help-section">
        <h3>Quick Actions Checklist</h3>
        <div id="helpChecklist" class="help-checklist">
          <div class="help-check-item">
            <div class="help-check-head">
              <input type="checkbox" data-role="help-check" data-check-id="chat_define_goal" />
              <span class="help-copy">Write one clear goal before asking.</span>
            </div>
            <div class="help-check-actions">
              <button data-role="help-run" data-help-action="chat_define_goal" data-help-first="true">Focus Input</button>
            </div>
          </div>
          <div class="help-check-item">
            <div class="help-check-head">
              <input type="checkbox" data-role="help-check" data-check-id="chat_set_risk" />
              <span class="help-copy">Set risk tolerance for your context.</span>
            </div>
            <div class="help-check-actions">
              <button data-role="help-run" data-help-action="chat_set_risk">Set Risk</button>
            </div>
          </div>
          <div class="help-check-item">
            <div class="help-check-head">
              <input type="checkbox" data-role="help-check" data-check-id="chat_ask" />
              <span class="help-copy">Ask for a concrete, executable response.</span>
            </div>
            <div class="help-check-actions">
              <button data-role="help-run" data-help-action="chat_ask">Ask Assistant</button>
            </div>
          </div>
          <div class="help-check-item">
            <div class="help-check-head">
              <input type="checkbox" data-role="help-check" data-check-id="chat_follow_up" />
              <span class="help-copy">Draft a follow-up to refine quality.</span>
            </div>
            <div class="help-check-actions">
              <button data-role="help-run" data-help-action="chat_follow_up">Draft Follow-up</button>
            </div>
          </div>
          <div class="help-check-item">
            <div class="help-check-head">
              <input type="checkbox" data-role="help-check" data-check-id="chat_request_brief" />
              <span class="help-copy">Request an implementation brief.</span>
            </div>
            <div class="help-check-actions">
              <button data-role="help-run" data-help-action="chat_request_brief">Request Brief</button>
            </div>
          </div>
          <div class="help-check-item">
            <div class="help-check-head">
              <input type="checkbox" data-role="help-check" data-check-id="chat_clear" />
              <span class="help-copy">Clear chat when starting a new objective.</span>
            </div>
            <div class="help-check-actions">
              <button data-role="help-run" data-help-action="chat_clear">Clear Chat</button>
            </div>
          </div>
        </div>
      </section>

      <section id="helpSectionTroubleshooting" class="help-section">
        <h3>Troubleshooting</h3>
        <ul class="help-list">
          <li>If output is generic, add timeline, constraints, and success criteria.</li>
          <li>If assistant asks a clarify question, answer it directly in one line and ask again.</li>
          <li>If output is too long, request a fixed number of steps (for example, "5-step plan").</li>
          <li>If provider errors appear, verify API key and provider mode.</li>
        </ul>
      </section>

      <label class="toggle-row">
        <input id="helpHideAdvanced" type="checkbox" data-role="toggle-hide-advanced" />
        Hide advanced help checklist.
      </label>
    </section>
  </div>

  <div id="welcomeOverlay" class="overlay" hidden>
    <section class="panel welcome" role="dialog" aria-modal="true" aria-labelledby="welcomeTitle">
      <div class="dialog-head">
        <h2 id="welcomeTitle">Welcome To RTC Assistant</h2>
        <button id="closeWelcome">Skip</button>
      </div>
      <p class="help-copy">Talk naturally. Ask for plans, revisions, and implementation briefs. The assistant keeps context by session.</p>
      <ul class="help-list">
        <li>State your goal and constraints clearly.</li>
        <li>Set risk tolerance before you ask.</li>
        <li>If a clarification appears, answer it briefly and continue.</li>
        <li>Iterate with follow-up prompts until it is actionable.</li>
      </ul>
      <div class="toolbar">
        <button id="startWelcome" class="primary">Start Chatting</button>
      </div>
    </section>
  </div>

  <script src="/app/app.js"></script>
</body>
</html>

